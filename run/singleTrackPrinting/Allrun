#!/bin/bash -e

# Source tutorial run functions
. $WM_PROJECT_DIR/bin/tools/RunFunctions

application=`getApplication`

if [[ "$1" == "-parallel" ]]; then
    runApplication blockMesh
    runApplication setFields
    runApplication decomposePar
    runParallel $application 4
    runApplication reconstructPar
else
    runApplication blockMesh
    cp 0/alpha.metal.orig 0/alpha.metal
    runApplication setFields
    runApplication generatePowderBed alpha.metal
    runApplication $application
fi
